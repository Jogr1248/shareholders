import { SampleSchema } from "./validation";
export async function validateSample(
  shareholder_id: string,
  name_english: string,
  name_amharic: string,
  gender: string,
  nationality: string,
  birth_date_amharic: string,
  birth_date_english: string | null,
  national_id_num: string,
  passport_num: string,
  tin_num: string,
  residency_status: string,
  city: string,
  sub_city: string,
  wereda: string,
  house_number: string,
  primary_phone: string,
  secondary_phone: string,
  email: string,
  dividend_bank_name: string,
  dividend_bank_account: string,
  subscribed_share: number,
  receipt_num: string,
  certificate_num: string,
  is_certificate_taken: boolean,
  medina_comment: string,
  general_comment: string,
) {
  const result = SampleSchema.safeParse({
    shareholder_id,
    name_english,
    name_amharic,
    gender,
    nationality,
    birth_date_amharic,
    birth_date_english,
    national_id_num,
    passport_num,
    tin_num,
    residency_status,
    city,
    sub_city,
    wereda,
    house_number,
    primary_phone,
    secondary_phone,
    email,
    dividend_bank_name,
    dividend_bank_account,
    subscribed_share,
    receipt_num,
    certificate_num,
    is_certificate_taken,
    medina_comment,
    general_comment,
  });

  if (!result.success) {
    return {
      errors: result.error.flatten().fieldErrors,
      fields: {
        shareholder_id,
        name_english,
        name_amharic,
        gender,
        nationality,
        birth_date_amharic,
        birth_date_english,
        national_id_num,
        passport_num,
        tin_num,
        residency_status,
        city,
        sub_city,
        wereda,
        house_number,
        primary_phone,
        secondary_phone,
        email,
        dividend_bank_name,
        dividend_bank_account,
        subscribed_share,
        receipt_num,
        certificate_num,
        is_certificate_taken,
        medina_comment,
        general_comment,
      },
      success: false,
    };
  }

  return { data: result.data };
}
